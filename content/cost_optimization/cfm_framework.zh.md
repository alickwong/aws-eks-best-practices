
# 成本优化 - 简介
AWS 云经济学是一门帮助客户通过采用亚马逊 EKS 等现代计算技术来提高效率和降低成本的学科。该学科建议遵循一种称为"云财务管理(CFM)框架"的方法论,该方法论由 4 个支柱组成:

![CFM 框架](../images/cfm_framework.png)

## "观察"支柱:测量和问责
"观察"支柱是一组基础性的活动和技术,用于定义如何测量、监控和对云支出承担责任。它通常被称为"可观察性"、"仪器化"或"遥测"。"可观察性"基础设施的功能和局限性决定了可以优化的内容。了解您的成本情况是成本优化的关键第一步,因为您需要知道起点在哪里。这种可见性还将指导您需要采取哪些活动来进一步优化您的环境。

以下是我们在"观察"支柱方面的最佳实践概述:

* 为您的工作负载定义并维护标记策略。
    * 使用[实例标记](https://docs.aws.amazon.com/eks/latest/userguide/eks-using-tags.html#tag-resources-for-billing),标记 EKS 集群可让您查看单个集群成本并在成本和使用报告中分配它们。
* 使用技术(如 [Kubecost](https://docs.kubecost.com/install-and-configure/install/provider-installations/aws-eks-cost-monitoring))建立 EKS 使用情况的报告和监控。
    * [启用云智能仪表板](https://wellarchitectedlabs.com/cost/200_labs/200_enterprise_dashboards/),通过正确标记资源并使用可视化,您可以测量和估算成本。
* 将云成本分配给应用程序、业务线(LoB)和收入流。
* 与业务利益相关方定义、测量和传播效率/价值 KPI。例如,创建一个"单位指标" KPI,用于测量每笔交易的成本,例如乘车服务可能有一个"每次乘车的成本"的 KPI。

有关与此支柱相关的推荐技术和活动的更多详细信息,请参见本指南中的[成本优化 - 可观察性](./cost_opt_observability.md)部分。

## "节省"支柱:成本优化

该支柱基于"观察"支柱中开发的技术和功能。以下活动通常属于此支柱:

* 识别并消除环境中的浪费。
* 针对成本效率进行架构和设计。
* 选择最佳采购选择,例如按需实例与Spot实例。
* 随服务的发展而调整:随着 AWS 服务的发展,有效使用这些服务的方式可能会发生变化。要愿意根据这些变化进行调整。

自从这些活动是操作性的,它们高度依赖于您环境的特征。问问自己,成本的主要驱动因素是什么?您不同的环境提供了什么业务价值?哪些购买选择和基础设施选择(如实例系列类型)最适合每个环境?

以下是 EKS 集群最常见成本驱动因素的优先列表:

1. **计算成本:** 结合多种实例系列、购买选择,并平衡可扩展性和可用性,需要仔细考虑。有关更多信息,请参见本指南"[成本优化 - 计算](./cost_opt_compute.md)"部分中的建议。
2. **网络成本:** 为 EKS 集群使用 3 个可用区可能会增加跨可用区的流量成本。有关如何平衡高可用性要求并保持网络流量成本较低的建议,请参阅本指南"[成本优化 - 网络](./cost_opt_networking.md)"部分。
3. **存储成本:** 根据 EKS 集群中工作负载的有状态/无状态性质以及不同存储类型的使用方式,存储可被视为工作负载的一部分。有关 EKS 存储成本的注意事项,请参阅本指南"[成本优化 - 存储](./cost_opt_storage.md)"部分。

## "计划"支柱: 规划和预测

一旦实施了"观察"支柱中的建议,集群就可以持续优化。随着有效运营集群的经验积累,规划和预测活动可以集中在:

* 动态预算和预测云成本。
* 量化 EKS 容器服务提供的业务价值。
* 将 EKS 集群成本管理与 IT 财务管理规划相集成。

## "运行"支柱

成本优化是一个持续的过程,涉及渐进式改进的飞轮:

![成本优化飞轮](../images/flywheel.png)

获得高层管理人员的支持对于将 EKS 集群优化纳入组织的"FinOps"工作至关重要。这可以通过共同了解 EKS 集群成本、实施 EKS 集群成本防护措施,以及确保工具、自动化和活动随组织需求而发展来实现利益相关方的一致性。

## 参考资料
* [AWS 云经济学,云财务管理](https://aws.amazon.com/aws-cost-management/)
