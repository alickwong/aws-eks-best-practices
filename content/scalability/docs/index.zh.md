
# EKS 可扩展性最佳实践
本指南提供了关于扩展 EKS 集群的建议。扩展 EKS 集群的目标是最大化单个集群可执行的工作量。使用单个大型 EKS 集群可以减少操作负载,相比使用多个集群而言,但它在多区域部署、租户隔离和集群升级等方面存在权衡。在本文中,我们将重点关注如何实现单个集群的最大可扩展性。

## 如何使用本指南
本指南面向负责在 AWS 中创建和管理 EKS 集群的开发人员和管理员。它侧重于一些通用的 Kubernetes 扩展实践,但不包含针对自管理 Kubernetes 集群或在 AWS 区域外使用 [EKS Anywhere](https://anywhere.eks.amazonaws.com/) 运行的集群的具体信息。

每个主题都有一个简要概述,后面是有关在大规模运行 EKS 集群的建议和最佳实践。这些主题不需要按特定顺序阅读,建议在测试并验证它们在您的集群中是否有效之前不要应用。

## 理解扩展维度
可扩展性不同于性能和[可靠性](https://aws.github.io/aws-eks-best-practices/reliability/docs/),在规划集群和工作负载需求时,这三者都应该考虑在内。随着集群的扩展,需要对其进行监控,但本指南不会涵盖监控最佳实践。EKS 可以扩展到较大规模,但您需要计划如何将集群扩展到 300 个节点或 5000 个 pod 以上。这些并非绝对数字,而是来自与多个用户、工程师和支持专业人员的协作。

Kubernetes 的扩展是多维度的,没有任何特定的设置或建议适用于所有情况。我们可以提供有关以下方面扩展的指导:

* [Kubernetes 控制平面](control-plane)
* [Kubernetes 数据平面](data-plane)
* [集群服务](cluster-services)
* [工作负载](workloads)

EKS 集群中的 **Kubernetes 控制平面**包括 AWS 自动运行和扩展的所有服务(例如 Kubernetes API 服务器)。控制平面的扩展是 AWS 的责任,但使用控制平面的责任在于您。

**Kubernetes 数据平面**扩展涉及集群和工作负载所需的 AWS 资源,但它们位于 EKS 控制平面之外。包括 EC2 实例、kubelet 和存储在内的资源都需要随集群扩展而扩展。

**集群服务**是运行在集群内部并为您的集群和工作负载提供功能的Kubernetes控制器和应用程序。这些可以是[EKS附加组件](https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html)以及您为合规性和集成而安装的其他服务或Helm图表。这些服务通常被工作负载所依赖,随着您的工作负载扩展,您的集群服务也需要相应扩展。

**工作负载**是您拥有集群的原因,应该水平扩展与集群。Kubernetes中的工作负载有一些集成和设置可以帮助集群扩展。Kubernetes抽象概念如命名空间和服务也需要进行架构考虑。

## 超大规模扩展
如果您正在将单个集群扩展到1000个节点或50,000个pod以上,我们很乐意与您交谈。我们建议您联系您的支持团队或技术客户经理,以便与可以帮助您规划和扩展超出本指南提供的信息的专家取得联系。
